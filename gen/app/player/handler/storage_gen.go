// Code generated by gen-api-client. DO NOT EDIT.

package handler

import (
	"context"

	"github.com/go-pantheon/fabrica-kit/xerrors"
	"github.com/go-pantheon/fabrica-util/errors"
	climsg "github.com/go-pantheon/roma/gen/api/client/message"
	cliseq "github.com/go-pantheon/roma/gen/api/client/sequence"
	"github.com/go-pantheon/roma/gen/app/codec"
	"github.com/go-pantheon/roma/gen/app/player/service"
	"google.golang.org/protobuf/proto"
)

func handleStorage(ctx context.Context, s *service.PlayerServices, mod, seq int32, obj int64, in []byte) (proto.Message, error) {
	cs, err := codec.UnmarshalCSStorage(seq, in)
	if err != nil {
		return nil, err
	}
	switch cliseq.StorageSeq(seq) {
	// Use pack
	case cliseq.StorageSeq_UsePack:
		return s.Storage.UsePack(ctx, cs.(*climsg.CSUsePack))
	default:
		return nil, errors.WithMessagef(xerrors.ErrHandlerNotFound, "invalid seq. mod=%s seq=%d", "Storage", seq)
	}
}
