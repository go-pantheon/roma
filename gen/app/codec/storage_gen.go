// Code generated by gen-api-client. DO NOT EDIT.

package codec

import (
	"strings"

	"github.com/pkg/errors"
	"google.golang.org/protobuf/proto"
	climsg "github.com/go-pantheon/roma/gen/api/client/message"
	cliseq "github.com/go-pantheon/roma/gen/api/client/sequence"
)

func UnmarshalCSStorage(seq int32, data []byte) (p proto.Message, err error) {
	switch cliseq.StorageSeq(seq) {
	// Use pack
	case cliseq.StorageSeq_UsePack:
		pp := &climsg.CSUsePack{}
		err = proto.Unmarshal(data, pp)
		p = pp

	default:
		err = errors.Errorf("Unmarshal CSStorage faild. sequence not found. seq=%d", seq)
		return
	}

	if err != nil {
		return nil, errors.Wrapf(err, "Unmarshal CSStorage faild. seq=%d", seq)
	}
	return
}

func UnmarshalSCStorage(seq int32, data []byte) (p proto.Message, err error) {
	switch cliseq.StorageSeq(seq) {
	// @push item updated
	case cliseq.StorageSeq_PushItemUpdated:
		pp := &climsg.SCPushItemUpdated{}
		err = proto.Unmarshal(data, pp)
		p = pp
	// Use pack
	case cliseq.StorageSeq_UsePack:
		pp := &climsg.SCUsePack{}
		err = proto.Unmarshal(data, pp)
		p = pp

	default:
		err = errors.Errorf("Unmarshal SCStorage faild. sequence not found. seq=%d", seq)
		return
	}

	if err != nil {
		return nil, errors.Wrapf(err, "Unmarshal SCStorage faild. seq=%d", seq)
	}
	return
}

func IsPushSCStorage(seq int32) bool {
	name := cliseq.StorageSeq_name[seq]
	return strings.Index(name, "Push_") == 0
}
